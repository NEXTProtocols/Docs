---
title: 'Upscale'
description: 'Upscale images to higher resolution using AI models'
---

## Endpoint

```
POST /toolskit/upscale
```

## Description

Upscales an image to a higher resolution using RunPod GPU inference. The endpoint accepts a base64-encoded image and returns URLs to the upscaled versions.

## Authentication

Requires Bearer token authentication with the main API token.

## Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `image_base64` | `string` | Yes | Base64 encoded image (with or without data URL prefix) |
| `upscale_factor` | `float` | Yes | Upscale multiplier (e.g., `2.0` for 2x) |

## Example Request

<CodeGroup>
```bash curl
curl -X POST http://localhost:8000/toolskit/upscale \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "image_base64": "/9j/4AAQSkZJRgABAQAAAQABAAD...",
    "upscale_factor": 2.0
  }'
```

```python python
import requests
import base64

# Read and encode image
with open("input_image.jpg", "rb") as f:
    image_base64 = base64.b64encode(f.read()).decode()

response = requests.post(
    "http://localhost:8000/toolskit/upscale",
    headers={
        "Authorization": "Bearer YOUR_API_TOKEN",
        "Content-Type": "application/json"
    },
    json={
        "image_base64": image_base64,
        "upscale_factor": 2.0
    }
)
print(response.json())
```
</CodeGroup>

## Response

### Success Response (200)

```json
{
  "price_job": 0.0025,
  "gpu_use": "NVIDIA A100",
  "content": {
    "signed_url_pictures": [
      "https://storage.example.com/upscaled/image.jpg?sig=..."
    ],
    "signed_url_pictures_webp": [
      "https://storage.example.com/upscaled/image.webp?sig=..."
    ]
  }
}
```

### Error Responses

**Invalid Image (400)**

```json
{
  "detail": "Invalid image_base64"
}
```

**Unable to Read Dimensions (400)**

```json
{
  "detail": "Unable to read image dimensions from image_base64"
}
```

**Invalid Upscale Factor (400)**

```json
{
  "detail": "Invalid upscale_factor"
}
```

**Workflow Not Found (404)**

```json
{
  "detail": "Workflow not found"
}
```

## Process Flow

1. **Image Detection** - Detects image format from magic bytes
2. **S3 Upload** - Uploads original image to S3
3. **Workflow Fetch** - Retrieves ComfyUI workflow configuration from Supabase
4. **Resolution Calculation** - Calculates target resolution based on upscale factor
5. **RunPod Execution** - Sends job to RunPod for processing
6. **Result Return** - Returns signed URLs to upscaled images

## Supported Formats

The endpoint automatically detects and supports:

- JPEG (.jpg, .jpeg)
- PNG (.png)
- WebP (.webp)
- GIF (.gif)

## Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `price_job` | `float` | Cost of the GPU job in dollars |
| `gpu_use` | `string` | GPU model used for processing |
| `content.signed_url_pictures` | `array` | URLs to upscaled images (original format) |
| `content.signed_url_pictures_webp` | `array` | URLs to upscaled images (WebP format) |

## Notes

- The upscale factor is applied to the smallest dimension of the image
- Images are processed synchronously (the request waits for completion)
- Both original format and WebP versions are generated
- The endpoint uses the `SeedVR2` model for upscaling
